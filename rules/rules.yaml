# === Stop-The-World 정지 관련 ===
- id: long_pause
  when:
    any:
      - { p99_pause: ">=500" }
      - { p95_pause: ">=200" }
  severity: high
  advice:
    - "힙 크기/리전 크기 조정"
    - "애플리케이션 메모리 사용 패턴 점검"

- id: stw_over_budget
  when:
    all:
      - { stw_percent: ">=5" }
  severity: high
  advice:
    - "동시성 GC 튜닝 고려"
    - "배치 작업 시간대와 겹치는지 확인"

# === Collector 특화 이벤트 ===
- id: evacuation_failure
  when:
    any:
      - { notes: "evacuation failure" }
  severity: critical
  advice:
    - "힙 확장 고려"
    - "-XX:InitiatingHeapOccupancyPercent 하향"
    - "대형 객체 할당 패턴 점검"

- id: humongous_objects
  when:
    all:
      - { humongous_ratio: ">=5" }
  severity: medium
  advice:
    - "-XX:G1HeapRegionSize 재평가"
    - "대형 배열/버퍼 슬라이싱 또는 풀링 고려"

- id: full_gc_detected
  when:
    any:
      - { phase: "Full" }
  severity: critical
  advice:
    - "메모리 누수 가능성 점검"
    - "Old 영역 압박 여부 확인"
    - "GC 로그와 힙덤프 분석"

- id: metaspace_growth
  when:
    all:
      - { metaspace_after_mb: ">=512" }
  severity: medium
  advice:
    - "동적 클래스 로딩/프록시 누수 점검"
    - "-XX:MaxMetaspaceSize 조정 고려"

- id: long_concurrent_phase
  when:
    any:
      - { concurrent_ms: ">=200" }
